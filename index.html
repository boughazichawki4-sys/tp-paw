<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestion des PrÃ©sences - Attendance Management</title>
  <link rel="stylesheet" href="style.css"> <!-- Fichier CSS externe -->
</head>
<body>

  <h1>ğŸ“Š Gestion des PrÃ©sences - Attendance Management</h1>
  <!-- Search + controls above the table -->
  <div class="search-controls">
    <label for="searchName">Search by Name:</label>
    <input id="searchName" type="text" placeholder="Type first or last name...">
    <button id="sortAbsBtn" type="button">Sort by Absences (Ascending)</button>
    <button id="sortParBtn" type="button">Sort by Participation (Descending)</button>
    <a href="manage_students.php" style="padding:8px 12px;background-color:#28a745;color:white;text-decoration:none;border-radius:5px;font-weight:600;display:inline-block;">ğŸ“‹ GÃ©rer les Ã©tudiants</a>
  </div>

  <!-- Tableau placÃ© en haut -->
  <table id="attendanceTable">
    <thead>
      <tr>
        <th>Student ID</th>
        <th>Last Name</th>
        <th>First Name</th>
        <th colspan="2">S1</th>
        <th colspan="2">S2</th>
        <th colspan="2">S3</th>
        <th colspan="2">S4</th>
        <th colspan="2">S5</th>
        <th colspan="2">S6</th>
        <th>Absences</th>
        <th>Participations</th>
        <th>Message</th>
      </tr>
      <tr>
        <th></th><th></th><th></th>
        <th>Pr</th><th>Pa</th>
        <th>Pr</th><th>Pa</th>
        <th>Pr</th><th>Pa</th>
        <th>Pr</th><th>Pa</th>
        <th>Pr</th><th>Pa</th>
        <th>Pr</th><th>Pa</th>
        <th></th><th></th><th></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>202331631713</td><td>boughazi</td><td>chawki</td>
        <td><input type="checkbox" checked></td><td><input type="checkbox"></td>
        <td><input type="checkbox" checked></td><td><input type="checkbox"></td>
        <td><input type="checkbox" checked></td><td><input type="checkbox" checked></td>
        <td><input type="checkbox" checked></td><td><input type="checkbox"></td>
        <td><input type="checkbox" checked></td><td><input type="checkbox" checked></td>
        <td><input type="checkbox" checked></td><td><input type="checkbox"></td>
        <td class="abs"></td>
        <td class="par"></td>
        <td class="msg"></td>
      </tr>
    </tbody>
  </table>

  <div id="sortStatus" class="sort-status">Currently unsorted</div>

  <div class="action-buttons">
    <button id="highlightBtn" type="button">Highlight Excellent Students</button>
    <button id="resetBtn" type="button">Reset Colors</button>
  </div>

  <!-- ===== Formulaire d'ajout d'Ã©tudiant ===== -->
  <div class="container">
    <h2>â• Add Student</h2>
    <p><a href="manage_students.php" class="link-manage-students">ğŸŒŸ Utiliser l'interface unifiÃ©e (meilleure expÃ©rience)</a></p>
    
    <div id="formAlert" class="form-alert"></div>

    <form id="studentForm" class="form-improved">
      <div class="form-group">
        <label for="studentId">
          <span class="label-icon">ğŸ†”</span>
          <span class="label-text">Student ID</span>
          <span class="required">*</span>
        </label>
        <input type="text" id="studentId" placeholder="Ex: 20233163" maxlength="20" required>
        <div class="error-message" id="idError"></div>
        <div class="field-hint">Minimum 8 chiffres</div>
      </div>

      <div class="form-group">
        <label for="lastName">
          <span class="label-icon">ğŸ‘¤</span>
          <span class="label-text">Last Name</span>
          <span class="required">*</span>
        </label>
        <input type="text" id="lastName" placeholder="Ex: Boughazi" maxlength="100" required>
        <div class="error-message" id="lastNameError"></div>
        <div class="field-hint">Minimum 2 caractÃ¨res</div>
      </div>

      <div class="form-group">
        <label for="firstName">
          <span class="label-icon">ğŸ‘¤</span>
          <span class="label-text">First Name</span>
          <span class="required">*</span>
        </label>
        <input type="text" id="firstName" placeholder="Ex: Chawki" maxlength="100" required>
        <div class="error-message" id="firstNameError"></div>
        <div class="field-hint">Minimum 2 caractÃ¨res</div>
      </div>

      <div class="form-group">
        <label for="email">
          <span class="label-icon">âœ‰ï¸</span>
          <span class="label-text">Email</span>
          <span class="required">*</span>
        </label>
        <input type="email" id="email" placeholder="Ex: student@example.com" maxlength="100" required>
        <div class="error-message" id="emailError"></div>
        <div class="field-hint">Format valide requis</div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-submit">ğŸ’¾ Add Student</button>
        <button type="reset" class="btn-reset">ğŸ”„ Clear</button>
      </div>
    </form>

    <div class="form-info">
      <strong>â„¹ï¸ Note:</strong> Ce formulaire ajoute les donnÃ©es au tableau sur cette page. 
      Pour une expÃ©rience complÃ¨te avec base de donnÃ©es, utilisez <a href="manage_students.php">l'interface unifiÃ©e</a>.
    </div>
  </div>

  
  <!-- ===== Rapport de prÃ©sence ===== -->
  <div class="report-panel">
    <button id="showReport" type="button">Show Report</button>
    <div id="reportOutput" class="report-output"></div>
    <canvas id="reportChart" width="400" height="300"></canvas>
  </div>

  <!-- 'Last Added Student' supprimÃ© -->

  <!-- jQuery (needed for the highlight/reset behaviour) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Chart.js for donut chart -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="script.js"></script> <!-- Fichier JS externe -->
</body>
</html>
